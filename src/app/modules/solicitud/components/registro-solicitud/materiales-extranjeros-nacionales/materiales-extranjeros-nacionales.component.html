<div class="p-grid" style="padding-top:20px;">
    <div class="p-col-12">
        <p-message severity="info" text="Corresponde a 
        las materias primas, productos intermedios, partes y piezas de fabricación 
        extranjera, utilizados en la elaboración del producto, ya sean importados 
        directamente por el fabricante o adquiridos en el mercado nacional importados 
        directamente por el proveedor.">
        </p-message>
    </div>
</div>

<div class="table">
    <div class="title">
        <div class="sub-title">
            <div class="p-grid">
                <div class="p-col-4"><button (click)="popUpAgregarInsumo()" style="margin-right: 20px;">AGREGAR
                        INSUMO</button></div>
                <span class="p-col-4"></span>
                <div class="p-col-4">
                    <div class="input-group">
                        <input placeholder="Buscar" type="text" [(ngModel)]="busqueda" />
                        <mat-icon svgIcon="buscar-circular-negativo"></mat-icon>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <p-table [value]="materiales" [customSort]="true" [lazy]="true" (onLazyLoad)="onSort($event)">
        <ng-template pTemplate="header">
            <tr>
                <th *ngFor="let def of definicionTabla.columnas" [pSortableColumn]="def.pSortableColumn">
                    <span class="headline-m --dark-primary-color">
                        {{def.titulo}}<p-sortIcon *ngIf="def.sortField!=''" [field]="def.sortField"></p-sortIcon>
                    </span>
                </th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-materiales>
            <tr>
                <td>
                    <p class="body-uno">{{materiales['nombreTecnico']}}</p>
                </td>
                <td>
                    <p class="body-uno">{{materiales['subpartida']}}</p>
                </td>
                <td>
                    <p class="body-uno">{{materiales['paisProcedencia']}}</p>
                </td>
                <td>
                    <p class="body-uno">{{materiales['undMedida']}}</p>
                </td>
                <td>
                    <p class="body-uno">{{materiales['cantidad']}}</p>
                </td>
                <td>
                    <p class="body-uno">{{materiales['valorCif']}}</p>
                </td>
                <td>
                    <p class="body-uno">{{materiales['valorPlanta']}}</p>
                </td>
                <td class="center">
                    <mat-icon svgIcon="editar-positivo" (click)="mostrarFormaEdicion(materiales)"></mat-icon>
                </td>
                <td class="center">
                    <mat-icon svgIcon="papelera-positivo" (click)="eliminarMaterial(materiales)"></mat-icon>
                </td>
            </tr>
        </ng-template>
    </p-table>
    <div *ngIf="materiales.length==0">
        <p class="content body-uno">No se encontraron registros coincidentes</p>
    </div>
    <!-- <p-paginator [rows]="pagina.registrosPorPagina" [totalRecords]="10" pageLinkSize="5"
        (onPageChange)="onPageChange($event)"></p-paginator> -->

</div>
<div class="material-btn-food">
    <div>
        <button mat-raised-button [disabled]="materiales.length==0" (click)="exportExcel()"
            style="margin-right: 20px;">IMPORTAR TODOS LOS
            REGISTROS</button>

        <button mat-raised-button [disabled]="materiales.length==0"
            (click)="abrirEliminarConfimracion(eliminarTemplate)" class="" style="margin-right: 20px;">ELIMINAR TODOS
            LOS
            REGISTROS</button>
    </div>

</div>

<ng-template #eliminarTemplate let-solicitud>
    <div class="modal warning">
        <div>
            <mat-icon svgIcon="informacion-circular-negativo"></mat-icon>
            <p class="body-uno">¿Seguro que desea eliminar todos los registros de la tabla Materiales Extrangeros?</p>
        </div>
        <div>
            <button class="outlined" (click)="dialogRef.close()">CANCELAR</button>
            <button (click)="onEliminarTodos(); dialogRef.close()">CONTINUAR</button>
        </div>
    </div>
</ng-template>